# 메인 화면

### Main페이지를 리뷰 상세정보를 조회할 때와 같이 Moking 사용

- 동일한 Mock data return

    - reviews 엔드포인트에 요청을 보내면, mockReviewData 값을 받음
    
    ```
    export const reviewForMain = http.get('http://localhost:5000/reviews', () => {
        return HttpResponse.json({ mockReviewData: '리뷰가 등록되었습니다.' }, { status: 200 });
    });
    ```

- `reviewForMain`을 핸들러로 전달

    ```
    import { setupWorker } from 'msw/browser';
    import { addReview, reviewForMain, reviewsById } from './review';

    const handlers = [reviewsById, addReview,reviewForMain];

    export const worker = setupWorker(...handlers);
    ```

### 데이터 상태를 가질 때 마다, 훅을 작성해서 처리

#### HOME 컴포넌트에서 Main의 데이터를 가진 HOOK 생성

- BookReviewItem[]타입으로 타입을 지정
- 초기 값을 빈 배열로 설정
- Main 컴포넌트에서 사용할 review 데이터
    ```
    export const useMain = () => {
        const [reviews, setReviews] = useState<BookReviewItem[]>([]);
        return reviews;
    };
    ```


#### API 요청

- fetchReviewAll라는 함수명으로 전체 리뷰 정보 조회 요청 함수
- BookReviewItem[] 타입으로 설정

    ```
    export const fetchReviewAll = async () => {
        return await requestHandler<BookReviewItem[]>('get', '/reviews');
    };
    ```


#### return하는 mock 데이터 형태

```
const mockReviewData: BookReviewItem[] = Array.from({
   length: 8,
}).map((_, index) => ({
   id: index,
   userName: faker.person.firstName(),
   content: faker.lorem.paragraph(),
   createdAt: faker.date.past().toISOString(),
   score: faker.helpers.rangeToNumber({ min: 1, max: 5 }),
}));
```


#### 전달받은 데이터 State 할당

- fetchReviewAll() 함수 성공 시, 전달 받은 데이터를 setReviews라는 useState에 할당
    ```
    export const useMain = () => {
        const [reviews, setReviews] = useState<BookReviewItem[]>([]);

        useEffect(() => {
            fetchReviewAll().then((reviews) => {
                setReviews(reviews);
            });
        }, []);

        return reviews;
    };
    ```


### 메인페이지 리뷰 영역 컴포넌트 생성

`MainReview.tsx`

- BookReviewItem 타입의 데이터를 컴포넌트에서 받음
- BookReviewItem 배열을 순회하며 각 리뷰 생성
    ```
    import { BookReviewItem as IBookReviewItem } from '@/models/book.model';

    interface Props {
        reviews: IBookReviewItem[];
    }

    const MainReview = ({ reviews }: Props) => {
        return (
            <>
                <MainReviewStyle>
                    {reviews.map((review) => (
                    <BookReview key={review.id} review={review} />
                    ))}
                </MainReviewStyle>
            </>
        );
    };
    ```

### HOME 컴포넌트에 추가

```
import MainReview from '@/components/main/MainReview';
import { useMain } from '@/hooks/useMain';
import styled from 'styled-components';

const Home = () => {
   //훅에서 데이터 받아오기
   const { reviews } = useMain();

   return (
      <>
         <HomeStyle>
            <MainReview reviews={reviews} />
         </HomeStyle>
      </>
   );
};

const HomeStyle = styled.div``;
export default Home;
```

### Slick 라이브러리

- 이미지 Slider를 사용하게 해주는 라이브러리

- 설치
    - `npm i react-slick --save`
    - `npm i react-slick-carousel`
    - `npm i --save-dev @types/react-slick`


- 라이브러리 세팅

    - `import Slider from 'react-slick';`

- Slide를 적용할 컴포넌트 감싸기

    ```
    <MainReviewStyle>
        <Slider>
            {reviews.map((review) => (
                <BookReview key={review.id} review={review} />
            ))}
        </Slider>
    </MainReviewStyle>
    ```

- 공식 홈페이지 권장 스타일 적용

    - https://github.com/akiran/react-slick
        ```
        import "slick-carousel/slick/slick.css";
        import "slick-carousel/slick/slick-theme.css";
        ```


- Slide setting

    ```
    const MainReview = ({ reviews }: Props) => {
        const sliderSettings = {
            dots: true,         //하단 페이지 네이션과 같은 점 표시
            Infinity: true,     //오른쪽 클릭 시, 제한 없이 넘김
            speed: 500,         //이미지가 넘어가는 밀리세컨
            slidesToShow: 3,    //한번에 표시될 이미지수
            slidesToScroll: 3,  //한번에 스크롤 될 이미지 수
        };

        return (
            <>
                <MainReviewStyle>
                    <Slider {...sliderSettings}>
                    {reviews.map((review) => (
                        <BookReview key={review.id} review={review} />
                    ))}
                    </Slider>
                </MainReviewStyle>
            </>
        );
    };
    ```
    ![alt text](image.png)


- slick track이 좌우로 이동하는 형태

    ![alt text](image-1.png)
    ![alt text](image-2.png)


- style

    ```
    const MainReviewStyle = styled.div`
        padding:0 0 24px 0; //하단 공간
        .slick-track {  
            padding: 12px 0; //상단, 하단 패딩
        }

        .slick-slide > div {
            margin: 0 12px; //좌, 우 margin
        }
        .slick-prev:bofore, //다음, 이전 버튼 색상 지정
        .slick-next:bofore {
            color: #000;
        }
    `;    
    ```
    ![alt text](image-4.png)


# 신간 안내 & 베스트셀러 Section

- 구현 예시
    ![alt text](image-5.png)